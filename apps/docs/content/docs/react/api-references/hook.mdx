---
title: Hook
description: Access and control your stepper with the useStepper hook
---

The `useStepper` hook returns the stepper instance with a structured API: **state**, **navigation**, **query**, **flow**, and **metadata**. Use it with or without the [`Scoped`](./scoped) component.

## Usage

```tsx twoslash
import * as React from "react";
import { defineStepper } from "@stepperize/react";

const { useStepper } = defineStepper(
  { id: "first", title: "First step" },
  { id: "second", title: "Second step" }
);

const MyStepperComponent = () => {
  const stepper = useStepper();
  return (
    <div>
      <h1>{stepper.state.current.data.title}</h1>
      <button onClick={() => stepper.navigation.next()} disabled={stepper.state.isLast}>Next</button>
      <button onClick={() => stepper.navigation.prev()} disabled={stepper.state.isFirst}>Previous</button>
    </div>
  );
};
```

## Hook config

Optional object passed to `useStepper({ ... })`:

| Property | Type | Description |
| -------- | ---- | ----------- |
| `initialStep` | `Get.Id<Steps>` | Initial active step ID |
| `initialMetadata` | `Partial<Record<Get.Id<Steps>, Metadata>>` | Initial metadata per step |

```tsx twoslash
import * as React from "react";
import { defineStepper } from "@stepperize/react";

const { useStepper } = defineStepper(
  { id: "first", title: "First" },
  { id: "second", title: "Second" }
);

const MyComponent = () => {
  const stepper = useStepper({
    initialStep: "second",
    initialMetadata: { first: { value: "saved" } }
  });
  return <div>{stepper.state.current.data.title}</div>;
};
```

## API structure

The stepper has five main namespaces plus transition hooks and top-level `isTransitioning`.

### state

| Property | Type | Description |
| -------- | ---- | ----------- |
| `state.all` | `Steps` | Array of all step objects |
| `state.current` | `{ data, index, status, metadata }` | Current step: `data` (step object), `index`, `status` (`"active"`), `metadata` (get/set/reset for current step only) |
| `state.isFirst` | `boolean` | `true` if on the first step |
| `state.isLast` | `boolean` | `true` if on the last step |
| `state.isTransitioning` | `boolean` | `true` while a transition (with callbacks) is in progress |

### navigation

| Method | Description |
| ------ | ----------- |
| `navigation.next()` | Go to next step. Returns `void` or `Promise<void>` when transition callbacks are used. |
| `navigation.prev()` | Go to previous step. |
| `navigation.goTo(id)` | Go to step by ID. |
| `navigation.reset()` | Reset to initial step. |

### query

Step lookup (same shape as `generateStepperUtils` from `@stepperize/core`):

| Method | Description |
| ------ | ----------- |
| `query.getAll()` | All steps |
| `query.get(id)` | Step object by ID |
| `query.getIndex(id)` | Index of step by ID |
| `query.getByIndex(index)` | Step at index |
| `query.getFirst()` / `query.getLast()` | First / last step |
| `query.getNext(id)` / `query.getPrev(id)` | Next / previous step after `id` |
| `query.getNeighbors(id)` | `{ prev, next }` for step `id` |

Current step index: use `stepper.state.current.index`. Step by ID: `stepper.query.get(id)`.

### flow

Rendering helpers and checks by step ID:

| Method | Description |
| ------ | ----------- |
| `flow.is(id)` | Returns `true` if the current step's ID equals `id`. Use for simple conditionals (e.g. `stepper.flow.is("payment")`). |
| `flow.when(id, whenFn, elseFn?)` | Run `whenFn(step)` if current step matches `id`, else `elseFn(step)`. First arg can be `[id, ...conditions]`. |
| `flow.switch(when)` | Object map of step ID → `(step) => R`. Runs the handler for the current step. |
| `flow.match(state, matches)` | Same shape as `switch` but `state` is any step ID (e.g. from URL). |

**Example — `flow.is`:**

```tsx
// Conditional render
{stepper.flow.is("confirmation") && <OrderSummary />}

// In conditionals
if (stepper.flow.is("payment")) {
  return <PaymentForm />;
}
```

### metadata

Step-scoped metadata (all steps):

| Property / Method | Description |
| ----------------- | ----------- |
| `metadata.values` | Record of all metadata per step ID |
| `metadata.set(id, values)` | Set metadata for a step |
| `metadata.get(id)` | Get metadata for a step |
| `metadata.reset(keepInitialMetadata?)` | Reset all metadata; pass `true` to keep initial from config |

Current step metadata only: use `state.current.metadata.get()`, `state.current.metadata.set(values)`, `state.current.metadata.reset()`.

## Transition hooks

Register callbacks that run on every `next()`, `prev()`, or `goTo()`. Call these on the stepper (e.g. in `useEffect`):

| Method | Description |
| ------ | ----------- |
| `onBeforeTransition(cb)` | Callback before transition. Receives `TransitionContext`; return `false` (or Promise resolving to `false`) to cancel. |
| `onAfterTransition(cb)` | Callback after transition. |

**TransitionContext** has: `from`, `to`, `metadata`, `statuses`, `direction` (`"next" \| "prev" \| "goTo"`), `fromIndex`, `toIndex`.

```tsx twoslash
import * as React from "react";
import { defineStepper } from "@stepperize/react";

const { useStepper } = defineStepper(
  { id: "first", title: "First" },
  { id: "second", title: "Second" }
);

function MyStepper() {
  const stepper = useStepper();

  React.useEffect(() => {
    stepper.onBeforeTransition(async (ctx) => {
      if (ctx.direction === "prev" && !window.confirm("Go back?")) return false;
    });
    stepper.onAfterTransition((ctx) => {
      console.log(`${ctx.from.id} → ${ctx.to.id}`);
    });
  }, [stepper]);

  return (
    <div>
      <button onClick={() => stepper.navigation.next()} disabled={stepper.isTransitioning || stepper.state.isLast}>
        {stepper.isTransitioning ? "..." : "Next"}
      </button>
    </div>
  );
}
```

## API summary

| Name | Type | Description |
| ---- | ---- | ----------- |
| `state` | `StepperState<Steps>` | `all`, `current` (data, index, status, metadata), `isFirst`, `isLast`, `isTransitioning` |
| `navigation` | `StepperNavigation<Steps>` | `next`, `prev`, `goTo`, `reset` |
| `query` | `StepperQuery<Steps>` | `getAll`, `get`, `getIndex`, `getByIndex`, `getFirst`, `getLast`, `getNext`, `getPrev`, `getNeighbors` |
| `flow` | `StepperFlow<Steps>` | `is`, `when`, `switch`, `match` |
| `metadata` | `StepperMetadata<Steps>` | `values`, `set`, `get`, `reset` |
| `isTransitioning` | `boolean` | Transition in progress (also on `state.isTransitioning`) |
| `onBeforeTransition` | `(cb) => void` | Register before callback |
| `onAfterTransition` | `(cb) => void` | Register after callback |
