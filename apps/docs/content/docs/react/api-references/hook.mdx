---
title: Hook
description: Access and control your stepper with the useStepper hook
---

The `useStepper` hook returns the stepper instance: state, navigation, metadata, and transition hooks. Use it with or without the [`Scoped`](./scoped) component.

## Usage

```tsx twoslash
import * as React from "react";
import { defineStepper } from "@stepperize/react";

const { useStepper } = defineStepper(
  { id: "first", title: "First step" },
  { id: "second", title: "Second step" }
);

const MyStepperComponent = () => {
  const stepper = useStepper();
  return (
    <div>
      <h1>{stepper.current.title}</h1>
      <button onClick={() => stepper.next()} disabled={stepper.isLast}>Next</button>
      <button onClick={() => stepper.prev()} disabled={stepper.isFirst}>Previous</button>
    </div>
  );
};
```

## Hook config

Optional object passed to `useStepper({ ... })`:

| Property | Type | Description |
| -------- | ---- | ----------- |
| `initialStep` | `Get.Id<Steps>` | Initial active step ID |
| `initialMetadata` | `Partial<Record<Get.Id<Steps>, Metadata>>` | Initial metadata per step |

```tsx twoslash
import * as React from "react";
import { defineStepper } from "@stepperize/react";

const { useStepper } = defineStepper(
  { id: "first", title: "First" },
  { id: "second", title: "Second" }
);

const MyComponent = () => {
  const stepper = useStepper({
    initialStep: "second",
    initialMetadata: { first: { value: "saved" } }
  });
  return <div>{stepper.current.title}</div>;
};
```

## State

| Property | Type | Description |
| -------- | ---- | ----------- |
| `all` | `Steps` | Array of all step objects |
| `current` | `Steps[number]` | Current step object (e.g. `{ id, title }`) |
| `isFirst` | `boolean` | `true` if on the first step |
| `isLast` | `boolean` | `true` if on the last step |
| `isTransitioning` | `boolean` | `true` while a transition (with callbacks) is in progress |
| `metadata` | `Record<Get.Id<Steps>, Metadata>` | Metadata for all steps |

There is no `currentIndex` on the stepper; use `utils.getIndex(stepper.current.id)` from the `utils` returned by `defineStepper`.

## Navigation

| Method | Description |
| ------ | ----------- |
| `next()` | Go to next step. Returns `void` or `Promise<void>` when transition callbacks are used. |
| `prev()` | Go to previous step. |
| `goTo(id)` | Go to step by ID. |
| `reset()` | Reset to initial step (and clear metadata unless you call `resetMetadata` separately with `true`). |

## Step lookup

| Method | Description |
| ------ | ----------- |
| `get(id)` | Get step object by ID. |

## Metadata

| Method | Description |
| ------ | ----------- |
| `setMetadata(id, values)` | Set metadata for a step. |
| `getMetadata(id)` | Get metadata for a step. |
| `resetMetadata(keepInitialMetadata?)` | Reset all metadata; pass `true` to keep initial metadata from config. |

## Rendering helpers

| Method | Description |
| ------ | ----------- |
| `when(id, whenFn, elseFn?)` | Run `whenFn(step)` if current step matches `id`, else `elseFn(step)`. First arg can be `[id, ...conditions]` (conditions must be truthy). |
| `switch(when)` | Object map of step ID → `(step) => R`. Runs the handler for the current step. |
| `match(state, matches)` | Same shape as `switch` but `state` is any step ID (e.g. from URL or server). |

## Transition hooks (on stepper)

Register callbacks that run on every `next()`, `prev()`, or `goTo()`. Call these methods on the stepper (e.g. in `useEffect`):

| Method | Description |
| ------ | ----------- |
| `onBeforeTransition(cb)` | Register callback before transition. Callback receives `TransitionContext`; return `false` (or Promise resolving to `false`) to cancel. |
| `onAfterTransition(cb)` | Register callback after transition. |

**TransitionContext** has: `from`, `to`, `metadata`, `statuses`, `direction` (`"next" \| "prev" \| "goTo"`), `fromIndex`, `toIndex`.

```tsx twoslash
import * as React from "react";
import { defineStepper } from "@stepperize/react";

const { useStepper } = defineStepper(
  { id: "first", title: "First" },
  { id: "second", title: "Second" }
);

function MyStepper() {
  const stepper = useStepper();

  React.useEffect(() => {
    stepper.onBeforeTransition(async (ctx) => {
      if (ctx.direction === "prev" && !window.confirm("Go back?")) return false;
      // allow: return nothing (void)
    });
    stepper.onAfterTransition((ctx) => {
      console.log(`${ctx.from.id} → ${ctx.to.id}`);
    });
  }, [stepper]);

  return (
    <div>
      <button onClick={() => stepper.next()} disabled={stepper.isTransitioning || stepper.isLast}>
        {stepper.isTransitioning ? "..." : "Next"}
      </button>
    </div>
  );
}
```

## API summary

| Name | Type | Description |
| ---- | ---- | ----------- |
| `all` | `Steps` | All steps |
| `current` | `Steps[number]` | Current step |
| `isFirst` | `boolean` | On first step |
| `isLast` | `boolean` | On last step |
| `isTransitioning` | `boolean` | Transition in progress |
| `metadata` | `Record<Id, Metadata>` | All metadata |
| `next` | `() => void \| Promise<void>` | Next step |
| `prev` | `() => void \| Promise<void>` | Previous step |
| `goTo` | `(id) => void \| Promise<void>` | Go to step |
| `reset` | `() => void` | Reset to initial |
| `get` | `(id) => Step \| undefined` | Get step by ID |
| `setMetadata` | `(id, values) => void` | Set step metadata |
| `getMetadata` | `(id) => Metadata` | Get step metadata |
| `resetMetadata` | `(keepInitial?) => void` | Reset metadata |
| `when` | `(id, whenFn, elseFn?) => R` | Conditional by step |
| `switch` | `(when) => R \| undefined` | Switch by current step |
| `match` | `(state, matches) => R \| null` | Match external state |
| `onBeforeTransition` | `(cb) => void` | Register before callback |
| `onAfterTransition` | `(cb) => void` | Register after callback |
