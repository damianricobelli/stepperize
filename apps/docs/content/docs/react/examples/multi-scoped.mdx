---
title: Multi-scoped Stepper
description: Step-by-step guide to nest two or more steppers (e.g. global wizard + local sub-steps) without primitives.
---

A **Multi-scoped Stepper** uses two (or more) separate steppers, each created with `defineStepper`. You nest their `<Scoped>` providers so that inner components can use the global stepper, the local stepper, or both—each via its own `useStepper()`. No primitives; only `defineStepper`, `Scoped`, and `useStepper` with your own UI.

Use cases: a global wizard (e.g. "Start" → "Middle" → "End") with a section that has its own sub-steps (e.g. "Sub-step 1" → "Sub-step 2"), or any hierarchy where each level has independent step state.

## 1. Define the global stepper

Create the outer/wizard stepper with `defineStepper`. You will use its `Scoped` and `useStepper` for the top-level flow.

```tsx twoslash
import { defineStepper } from "@stepperize/react";

const GlobalStepper = defineStepper(
  { id: "start", title: "Start" },
  { id: "middle", title: "Middle" },
  { id: "end", title: "End" }
);
```

## 2. Define the local stepper

Create a second stepper for the nested/sub-steps. This one will be used only inside the global scope (or wherever you mount its `Scoped`).

```tsx twoslash
import { defineStepper } from "@stepperize/react";

const GlobalStepper = defineStepper(
  { id: "start", title: "Start" },
  { id: "middle", title: "Middle" },
  { id: "end", title: "End" }
);

const LocalStepper = defineStepper(
  { id: "sub1", title: "Sub-step 1" },
  { id: "sub2", title: "Sub-step 2" }
);
```

## 3. Nest Scoped providers

Wrap your tree with the global `Scoped` first, then mount the local `Scoped` inside it. Order matters: inner components can call both `GlobalStepper.useStepper()` and `LocalStepper.useStepper()`; components outside the local `Scoped` only have access to the global stepper.

```tsx twoslash
import * as React from "react";
import { defineStepper } from "@stepperize/react";

const GlobalStepper = defineStepper(
  { id: "start", title: "Start" },
  { id: "middle", title: "Middle" },
  { id: "end", title: "End" }
);

const LocalStepper = defineStepper(
  { id: "sub1", title: "Sub-step 1" },
  { id: "sub2", title: "Sub-step 2" }
);

export function MultiScopedStepper() {
  return (
    <GlobalStepper.Scoped>
      <GlobalStepContent />
      <LocalStepper.Scoped>
        <LocalStepContent />
        <LocalStepNavigation />
      </LocalStepper.Scoped>
      <GlobalStepNavigation />
    </GlobalStepper.Scoped>
  );
}

function GlobalStepContent() {
  const stepper = GlobalStepper.useStepper();
  return <div>Global: {stepper.state.current.data.title}</div>;
}

function GlobalStepNavigation() {
  const stepper = GlobalStepper.useStepper();
  return (
    <div>
      {!stepper.state.isFirst && (
        <button type="button" onClick={() => stepper.navigation.prev()}>Back</button>
      )}
      {!stepper.state.isLast && (
        <button type="button" onClick={() => stepper.navigation.next()}>Next</button>
      )}
    </div>
  );
}

function LocalStepContent() {
  const stepper = LocalStepper.useStepper();
  return <div>Local: {stepper.state.current.data.title}</div>;
}

function LocalStepNavigation() {
  const stepper = LocalStepper.useStepper();
  return (
    <div>
      <button type="button" onClick={() => stepper.navigation.prev()} disabled={stepper.state.isFirst}>
        Prev sub
      </button>
      <button type="button" onClick={() => stepper.navigation.next()} disabled={stepper.state.isLast}>
        Next sub
      </button>
    </div>
  );
}
```

## 4. Use the right useStepper in each component

- **GlobalStepper.useStepper()** — Use in components that are descendants of `GlobalStepper.Scoped`. You get the global step index, `state.current`, `navigation.next()` / `prev()`, etc.
- **LocalStepper.useStepper()** — Use in components that are descendants of `LocalStepper.Scoped`. You get the local step index and navigation; it is independent of the global stepper.

Each stepper has its own state. Advancing the local stepper does not change the global step, and vice versa.

## 5. Optional: show local steps only on a given global step

You can conditionally render the local `Scoped` (and thus the local step UI) only when the global stepper is on a specific step, e.g. "middle". Use a wrapper component that calls `GlobalStepper.useStepper()` and returns the local scope only when `stepper.flow.is("middle")`.

```tsx
import * as React from "react";
// GlobalStepper, LocalStepper, GlobalStepContent, LocalStepContent,
// LocalStepNavigation, GlobalStepNavigation defined elsewhere (see Full example).

function GlobalStepGate({ children }: { children: React.ReactNode }) {
  const globalStepper = GlobalStepper.useStepper();
  if (!globalStepper.flow.is("middle")) return null;
  return <>{children}</>;
}

function MultiScopedStepper() {
  return (
    <GlobalStepper.Scoped>
      <GlobalStepContent />
      <GlobalStepGate>
        <LocalStepper.Scoped>
          <LocalStepContent />
          <LocalStepNavigation />
        </LocalStepper.Scoped>
      </GlobalStepGate>
      <GlobalStepNavigation />
    </GlobalStepper.Scoped>
  );
}
```

## Live preview

<MultiScopedPreview />

## Full example

```tsx twoslash
import * as React from "react";
import { defineStepper } from "@stepperize/react";

const GlobalStepper = defineStepper(
  { id: "start", title: "Start" },
  { id: "middle", title: "Middle" },
  { id: "end", title: "End" }
);

const LocalStepper = defineStepper(
  { id: "sub1", title: "Sub-step 1" },
  { id: "sub2", title: "Sub-step 2" }
);

function GlobalStepContent() {
  const stepper = GlobalStepper.useStepper();
  return (
    <div>
      <p>Global step: {stepper.state.current.data.title}</p>
      {stepper.flow.switch({
        start: () => <p>Start content.</p>,
        middle: () => (
          <LocalStepper.Scoped>
            <LocalStepContent />
            <LocalStepNavigation />
          </LocalStepper.Scoped>
        ),
        end: () => <p>End content.</p>,
      })}
    </div>
  );
}

function LocalStepContent() {
  const stepper = LocalStepper.useStepper();
  return <p>Local step: {stepper.state.current.data.title}</p>;
}

function LocalStepNavigation() {
  const stepper = LocalStepper.useStepper();
  return (
    <div>
      <button type="button" onClick={() => stepper.navigation.prev()} disabled={stepper.state.isFirst}>
        Prev
      </button>
      <button type="button" onClick={() => stepper.navigation.next()} disabled={stepper.state.isLast}>
        Next
      </button>
    </div>
  );
}

function GlobalStepNavigation() {
  const stepper = GlobalStepper.useStepper();
  return (
    <div>
      {!stepper.state.isFirst && (
        <button type="button" onClick={() => stepper.navigation.prev()}>Back</button>
      )}
      {stepper.state.isLast ? (
        <button type="button" onClick={() => stepper.navigation.reset()}>Reset</button>
      ) : (
        <button type="button" onClick={() => stepper.navigation.next()}>Next</button>
      )}
    </div>
  );
}

export function MultiScopedStepper() {
  return (
    <GlobalStepper.Scoped>
      <GlobalStepContent />
      <GlobalStepNavigation />
    </GlobalStepper.Scoped>
  );
}
```

## Summary

- **Two (or more) defineStepper calls** — Each gives you its own `Scoped` and `useStepper`.
- **Nest Scoped** — Put the local `Scoped` inside the global `Scoped` (or inside a branch that has global context) so inner components can use both hooks.
- **Call the matching useStepper** — Use `GlobalStepper.useStepper()` for global state/navigation and `LocalStepper.useStepper()` for local state/navigation; they are independent.
- No primitives — Build your own UI for both levels; Stepperize only provides the two stepper instances.

For a single-scope stepper without primitives, see [Scoped Stepper](/docs/react/examples/scoped).
