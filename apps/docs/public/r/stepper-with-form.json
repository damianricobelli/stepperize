{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "stepper-with-form",
  "title": "Stepper with form",
  "description": "A stepper with a form using zod for validation",
  "dependencies": [
    "zod",
    "@stepperize/react"
  ],
  "registryDependencies": [
    "button",
    "input",
    "label",
    "form"
  ],
  "files": [
    {
      "path": "registry/new-york/blocks/stepper-with-form/page.tsx",
      "content": "import { StepperWithForm } from \"@/registry/new-york/blocks/stepper-with-form/components/stepper-with-form\";\n\nexport default async function Page() {\n\treturn (\n\t\t<div className=\"flex min-h-screen items-center justify-center\">\n\t\t\t<div className=\"w-full max-w-2xl px-4\">\n\t\t\t\t<StepperWithForm />\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n",
      "type": "registry:page",
      "target": "app/stepper-with-form/page.tsx"
    },
    {
      "path": "registry/new-york/blocks/stepper-with-form/components/stepper-with-form.tsx",
      "content": "\"use client\";\n\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { defineStepper, Get } from \"@stepperize/react\";\nimport { useStepItemContext } from \"@stepperize/react/primitives\";\nimport { useForm } from \"react-hook-form\";\nimport * as z from \"zod\";\n\nimport { Button } from \"@/registry/new-york/ui/button\";\nimport {\n\tForm,\n\tFormControl,\n\tFormField,\n\tFormItem,\n\tFormLabel,\n\tFormMessage,\n} from \"@/registry/new-york/ui/form\";\nimport { Input } from \"@/registry/new-york/ui/input\";\n\nconst personalInfoSchema = z.object({\n\tfirstName: z.string().min(2, \"First name must be at least 2 characters\"),\n\tlastName: z.string().min(2, \"Last name must be at least 2 characters\"),\n});\n\nconst contactInfoSchema = z.object({\n\temail: z.string().email(\"Invalid email address\"),\n\tphone: z.string().min(10, \"Phone number must be at least 10 digits\"),\n});\n\nconst addressSchema = z.object({\n\tstreet: z.string().min(5, \"Street address is required\"),\n\tcity: z.string().min(2, \"City is required\"),\n\tzipCode: z.string().min(5, \"ZIP code must be at least 5 characters\"),\n});\n\ntype PersonalInfo = z.infer<typeof personalInfoSchema>;\ntype ContactInfo = z.infer<typeof contactInfoSchema>;\ntype Address = z.infer<typeof addressSchema>;\n\nconst { Stepper, ...stepperDefinition } = defineStepper([\n\t{\n\t\tid: \"personal\",\n\t\ttitle: \"Personal Info\",\n\t\tdescription: \"Enter your personal details\",\n\t},\n\t{\n\t\tid: \"contact\",\n\t\ttitle: \"Contact Info\",\n\t\tdescription: \"How can we reach you?\",\n\t},\n\t{\n\t\tid: \"address\",\n\t\ttitle: \"Address\",\n\t\tdescription: \"Where do you live?\",\n\t},\n\t{\n\t\tid: \"complete\",\n\t\ttitle: \"Complete\",\n\t\tdescription: \"Review and submit\",\n\t},\n]);\n\nconst StepperTriggerWrapper = () => {\n\tconst item = useStepItemContext();\n\tconst isInactive = item.status === \"inactive\";\n\n\treturn (\n\t\t<Stepper.Trigger\n\t\t\trender={(domProps) => (\n\t\t\t\t<Button\n\t\t\t\t\tclassName=\"rounded-full\"\n\t\t\t\t\tvariant={isInactive ? \"secondary\" : \"default\"}\n\t\t\t\t\tsize=\"icon\"\n\t\t\t\t\t{...domProps}\n\t\t\t\t>\n\t\t\t\t\t<Stepper.Indicator />\n\t\t\t\t</Button>\n\t\t\t)}\n\t\t/>\n\t);\n};\n\nconst StepperTitleWrapper = ({ title }: { title: string }) => {\n\treturn (\n\t\t<Stepper.Title\n\t\t\trender={(domProps) => (\n\t\t\t\t<h4 className=\"text-base font-medium\" {...domProps}>\n\t\t\t\t\t{title}\n\t\t\t\t</h4>\n\t\t\t)}\n\t\t/>\n\t);\n};\n\nconst StepperDescriptionWrapper = ({\n\tdescription,\n}: { description?: string }) => {\n\tif (!description) return null;\n\treturn (\n\t\t<Stepper.Description\n\t\t\trender={(domProps) => (\n\t\t\t\t<p className=\"text-sm text-muted-foreground\" {...domProps}>\n\t\t\t\t\t{description}\n\t\t\t\t</p>\n\t\t\t)}\n\t\t/>\n\t);\n};\n\nconst StepperSeparatorWithStatus = ({\n\tstatus,\n\tisLast,\n}: { status: string; isLast: boolean }) => {\n\tif (isLast) return null;\n\n\treturn (\n\t\t<Stepper.Separator\n\t\t\torientation=\"horizontal\"\n\t\t\tdata-status={status}\n\t\t\tclassName=\"bg-muted data-[status=success]:bg-primary data-[disabled]:opacity-50 transition-all duration-300 ease-in-out data-[orientation=horizontal]:h-0.5 data-[orientation=horizontal]:flex-1\"\n\t\t/>\n\t);\n};\n\nfunction PersonalInfoForm({\n\tonNext,\n\tdefaultValues,\n}: {\n\tonNext: (data: PersonalInfo) => void;\n\tdefaultValues?: PersonalInfo;\n}) {\n\tconst form = useForm<PersonalInfo>({\n\t\tresolver: zodResolver(personalInfoSchema),\n\t\tdefaultValues: defaultValues || { firstName: \"\", lastName: \"\" },\n\t});\n\n\treturn (\n\t\t<Form {...form}>\n\t\t\t<form onSubmit={form.handleSubmit(onNext)} className=\"space-y-4\">\n\t\t\t\t<FormField\n\t\t\t\t\tcontrol={form.control}\n\t\t\t\t\tname=\"firstName\"\n\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t<FormItem>\n\t\t\t\t\t\t\t<FormLabel>First Name</FormLabel>\n\t\t\t\t\t\t\t<FormControl>\n\t\t\t\t\t\t\t\t<Input placeholder=\"John\" {...field} />\n\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t\t<FormMessage />\n\t\t\t\t\t\t</FormItem>\n\t\t\t\t\t)}\n\t\t\t\t/>\n\t\t\t\t<FormField\n\t\t\t\t\tcontrol={form.control}\n\t\t\t\t\tname=\"lastName\"\n\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t<FormItem>\n\t\t\t\t\t\t\t<FormLabel>Last Name</FormLabel>\n\t\t\t\t\t\t\t<FormControl>\n\t\t\t\t\t\t\t\t<Input placeholder=\"Doe\" {...field} />\n\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t\t<FormMessage />\n\t\t\t\t\t\t</FormItem>\n\t\t\t\t\t)}\n\t\t\t\t/>\n\t\t\t\t<div className=\"flex justify-end\">\n\t\t\t\t\t<Button type=\"submit\">Next</Button>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t</Form>\n\t);\n}\n\nfunction ContactInfoForm({\n\tonNext,\n\tonPrev,\n\tdefaultValues,\n}: {\n\tonNext: (data: ContactInfo) => void;\n\tonPrev: () => void;\n\tdefaultValues?: ContactInfo;\n}) {\n\tconst form = useForm<ContactInfo>({\n\t\tresolver: zodResolver(contactInfoSchema),\n\t\tdefaultValues: defaultValues || { email: \"\", phone: \"\" },\n\t});\n\n\treturn (\n\t\t<Form {...form}>\n\t\t\t<form onSubmit={form.handleSubmit(onNext)} className=\"space-y-4\">\n\t\t\t\t<FormField\n\t\t\t\t\tcontrol={form.control}\n\t\t\t\t\tname=\"email\"\n\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t<FormItem>\n\t\t\t\t\t\t\t<FormLabel>Email</FormLabel>\n\t\t\t\t\t\t\t<FormControl>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\ttype=\"email\"\n\t\t\t\t\t\t\t\t\tplaceholder=\"john@example.com\"\n\t\t\t\t\t\t\t\t\t{...field}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t\t<FormMessage />\n\t\t\t\t\t\t</FormItem>\n\t\t\t\t\t)}\n\t\t\t\t/>\n\t\t\t\t<FormField\n\t\t\t\t\tcontrol={form.control}\n\t\t\t\t\tname=\"phone\"\n\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t<FormItem>\n\t\t\t\t\t\t\t<FormLabel>Phone</FormLabel>\n\t\t\t\t\t\t\t<FormControl>\n\t\t\t\t\t\t\t\t<Input placeholder=\"1234567890\" {...field} />\n\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t\t<FormMessage />\n\t\t\t\t\t\t</FormItem>\n\t\t\t\t\t)}\n\t\t\t\t/>\n\t\t\t\t<div className=\"flex justify-end gap-4\">\n\t\t\t\t\t<Button type=\"button\" variant=\"secondary\" onClick={onPrev}>\n\t\t\t\t\t\tPrevious\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button type=\"submit\">Next</Button>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t</Form>\n\t);\n}\n\nfunction AddressForm({\n\tonNext,\n\tonPrev,\n\tdefaultValues,\n}: {\n\tonNext: (data: Address) => void;\n\tonPrev: () => void;\n\tdefaultValues?: Address;\n}) {\n\tconst form = useForm<Address>({\n\t\tresolver: zodResolver(addressSchema),\n\t\tdefaultValues: defaultValues || { street: \"\", city: \"\", zipCode: \"\" },\n\t});\n\n\treturn (\n\t\t<Form {...form}>\n\t\t\t<form onSubmit={form.handleSubmit(onNext)} className=\"space-y-4\">\n\t\t\t\t<FormField\n\t\t\t\t\tcontrol={form.control}\n\t\t\t\t\tname=\"street\"\n\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t<FormItem>\n\t\t\t\t\t\t\t<FormLabel>Street Address</FormLabel>\n\t\t\t\t\t\t\t<FormControl>\n\t\t\t\t\t\t\t\t<Input placeholder=\"123 Main St\" {...field} />\n\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t\t<FormMessage />\n\t\t\t\t\t\t</FormItem>\n\t\t\t\t\t)}\n\t\t\t\t/>\n\t\t\t\t<FormField\n\t\t\t\t\tcontrol={form.control}\n\t\t\t\t\tname=\"city\"\n\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t<FormItem>\n\t\t\t\t\t\t\t<FormLabel>City</FormLabel>\n\t\t\t\t\t\t\t<FormControl>\n\t\t\t\t\t\t\t\t<Input placeholder=\"New York\" {...field} />\n\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t\t<FormMessage />\n\t\t\t\t\t\t</FormItem>\n\t\t\t\t\t)}\n\t\t\t\t/>\n\t\t\t\t<FormField\n\t\t\t\t\tcontrol={form.control}\n\t\t\t\t\tname=\"zipCode\"\n\t\t\t\t\trender={({ field }) => (\n\t\t\t\t\t\t<FormItem>\n\t\t\t\t\t\t\t<FormLabel>ZIP Code</FormLabel>\n\t\t\t\t\t\t\t<FormControl>\n\t\t\t\t\t\t\t\t<Input placeholder=\"10001\" {...field} />\n\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t\t<FormMessage />\n\t\t\t\t\t\t</FormItem>\n\t\t\t\t\t)}\n\t\t\t\t/>\n\t\t\t\t<div className=\"flex justify-end gap-4\">\n\t\t\t\t\t<Button type=\"button\" variant=\"secondary\" onClick={onPrev}>\n\t\t\t\t\t\tPrevious\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button type=\"submit\">Next</Button>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t</Form>\n\t);\n}\n\nfunction CompleteStep({\n\tformData,\n\tonReset,\n\tonPrev,\n}: {\n\tformData: {\n\t\tpersonal?: PersonalInfo;\n\t\tcontact?: ContactInfo;\n\t\taddress?: Address;\n\t};\n\tonReset: () => void;\n\tonPrev: () => void;\n}) {\n\treturn (\n\t\t<div className=\"space-y-4\">\n\t\t\t<div className=\"rounded border bg-secondary p-4 space-y-3\">\n\t\t\t\t<h3 className=\"font-semibold\">Summary</h3>\n\t\t\t\t{formData.personal && (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">Name</p>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t{formData.personal.firstName}{\" \"}\n\t\t\t\t\t\t\t{formData.personal.lastName}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t{formData.contact && (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">Contact</p>\n\t\t\t\t\t\t<p>{formData.contact.email}</p>\n\t\t\t\t\t\t<p>{formData.contact.phone}</p>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t{formData.address && (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<p className=\"text-sm text-muted-foreground\">Address</p>\n\t\t\t\t\t\t<p>{formData.address.street}</p>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t{formData.address.city}, {formData.address.zipCode}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t<div className=\"flex justify-end gap-4\">\n\t\t\t\t<Button type=\"button\" variant=\"secondary\" onClick={onPrev}>\n\t\t\t\t\tPrevious\n\t\t\t\t</Button>\n\t\t\t\t<Button type=\"button\" onClick={onReset}>\n\t\t\t\t\tStart Over\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\ntype FormData = {\n\tpersonal?: PersonalInfo;\n\tcontact?: ContactInfo;\n\taddress?: Address;\n};\n\nexport function StepperWithForm() {\n\treturn (\n\t\t<Stepper.Root className=\"w-full space-y-4\" orientation=\"horizontal\">\n\t\t\t{({ stepper }) => {\n\t\t\t\tconst formData: FormData = (stepper.current.metadata as FormData) ?? {};\n\n\t\t\t\treturn (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<Stepper.List className=\"flex gap-2 flex-row items-center justify-between\">\n\t\t\t\t\t\t\t{stepper.steps.map((stepInfo, index) => {\n\t\t\t\t\t\t\t\tconst { status } = stepInfo;\n\t\t\t\t\t\t\t\tconst isLast =\n\t\t\t\t\t\t\t\t\tindex === stepper.steps.length - 1;\n\t\t\t\t\t\t\t\tconst stepData = stepInfo.data as {\n\t\t\t\t\t\t\t\t\tid: string;\n\t\t\t\t\t\t\t\t\ttitle: string;\n\t\t\t\t\t\t\t\t\tdescription?: string;\n\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\treturn [\n\t\t\t\t\t\t\t\t\t<Stepper.Item\n\t\t\t\t\t\t\t\t\t\tkey={stepInfo.data.id}\n\t\t\t\t\t\t\t\t\t\tstep={stepInfo.data.id}\n\t\t\t\t\t\t\t\t\t\tclassName=\"group peer relative flex items-center gap-2\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<StepperTriggerWrapper />\n\t\t\t\t\t\t\t\t\t\t<div className=\"flex flex-col items-start gap-1\">\n\t\t\t\t\t\t\t\t\t\t\t<StepperTitleWrapper\n\t\t\t\t\t\t\t\t\t\t\t\ttitle={stepData.title}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<StepperDescriptionWrapper\n\t\t\t\t\t\t\t\t\t\t\t\tdescription={\n\t\t\t\t\t\t\t\t\t\t\t\t\tstepData.description\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</Stepper.Item>,\n\t\t\t\t\t\t\t\t\t<StepperSeparatorWithStatus\n\t\t\t\t\t\t\t\t\t\tkey={`separator-${stepInfo.data.id}`}\n\t\t\t\t\t\t\t\t\t\tstatus={status}\n\t\t\t\t\t\t\t\t\t\tisLast={isLast}\n\t\t\t\t\t\t\t\t\t/>,\n\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</Stepper.List>\n\n\t\t\t\t\t\t<div className=\"min-h-[280px] rounded border bg-card p-6\">\n\t\t\t\t\t\t\t{stepper.switch({\n\t\t\t\t\t\t\t\tpersonal: () => (\n\t\t\t\t\t\t\t\t\t<PersonalInfoForm\n\t\t\t\t\t\t\t\t\t\tdefaultValues={stepper.current.metadata?.personal as PersonalInfo | undefined}\n\t\t\t\t\t\t\t\t\t\tonNext={(data) => {\n\t\t\t\t\t\t\t\t\t\t\tstepper.current.setMetadata({\n\t\t\t\t\t\t\t\t\t\t\t\t...formData,\n\t\t\t\t\t\t\t\t\t\t\t\tpersonal: data,\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\tstepper.next();\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tcontact: () => (\n\t\t\t\t\t\t\t\t\t<ContactInfoForm\n\t\t\t\t\t\t\t\t\t\tdefaultValues={formData.contact}\n\t\t\t\t\t\t\t\t\t\tonNext={(data) => {\n\t\t\t\t\t\t\t\t\t\t\tstepper.current.setMetadata({\n\t\t\t\t\t\t\t\t\t\t\t\t...formData,\n\t\t\t\t\t\t\t\t\t\t\t\tcontact: data,\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\tstepper.next();\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tonPrev={() => stepper.prev()}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\taddress: () => (\n\t\t\t\t\t\t\t\t\t<AddressForm\n\t\t\t\t\t\t\t\t\t\tdefaultValues={formData.address}\n\t\t\t\t\t\t\t\t\t\tonNext={(data) => {\n\t\t\t\t\t\t\t\t\t\t\tstepper.current.setMetadata({\n\t\t\t\t\t\t\t\t\t\t\t\t...formData,\n\t\t\t\t\t\t\t\t\t\t\t\taddress: data,\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\tstepper.next();\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tonPrev={() => stepper.prev()}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tcomplete: () => (\n\t\t\t\t\t\t\t\t\t<CompleteStep\n\t\t\t\t\t\t\t\t\t\tformData={formData}\n\t\t\t\t\t\t\t\t\t\tonReset={() => {\n\t\t\t\t\t\t\t\t\t\t\tstepper.current.setMetadata({});\n\t\t\t\t\t\t\t\t\t\t\tstepper.reset();\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tonPrev={() => stepper.prev()}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>\n\t\t\t\t);\n\t\t\t}}\n\t\t</Stepper.Root>\n\t);\n}\n",
      "type": "registry:component"
    }
  ],
  "type": "registry:component"
}